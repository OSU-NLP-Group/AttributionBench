# AttributionBench
Code and datasets for the paper "AttributionBench: How Hard is Automatic Attribution Evaluation?".

## Dataset
We constructed this dataset from multiple existing data sources in a unified format, in order to create a unified and diverse testbed for evaluating advanced attribution evaluation systems. The dataset contains both in-domain training set and id-domain and out-of-domain test set.

## Usage
```python
import datasets

features = datasets.Features({
  'question': datasets.Value('string'),
  'claim': datasets.Value('string'),
  'claim_raw_string': datasets.Value('string'),
  'response': datasets.Value('string'),
  'references': datasets.Sequence(datasets.Value("string")),
  'citation_links': datasets.Sequence(datasets.Value("string")),
  'webpage_references': datasets.Sequence(datasets.Value("string")),
  'attribution_label': datasets.Value('string'),
  'src_dataset': datasets.Value('string'),
  'id': datasets.Value('string'),
  })

# in-domain train (subset-balanced): 
train_dataset = datasets.load_dataset("json", split='train', data_files="data/train_all_subset_balanced.jsonl", features=features)

# in-domain dev (subset-balanced)
dev_dataset = datasets.load_dataset("json", split='train', data_files="data/dev_all_subset_balanced.jsonl", features=features)

# in-domain test (subset-balanced)
test_dataset = datasets.load_dataset("json", split='train', data_files="data/test_all_subset_balanced.jsonl", features=features)

# out-of-domain test (subset-balanced)
test_ood_dataset = datasets.load_dataset("json", split='train', data_files="data/test_ood_all_subset_balanced.jsonl", features=features)
```

## Dataset Structure
### Data Instances
```json
{
  "question":"Is the number of horses living on Easter Island twice the number of people?",
  "claim":"According to James Grant-Peterkin in his book \u201cA Companion to Easter Island\u201d, there are almost 3,000 horses on Easter Island. However, locals often claim that they have more horses than people. The population of Easter Island is about 6,000 inhabitants. So it seems that the number of horses living on Easter Island is not twice the number of people.",
  "claim_raw_string":"According to James Grant-Peterkin in his book \u201cA Companion to Easter Island\u201d, there are almost 3,000 horses on Easter Island. However, locals often claim that they have more horses than people. The population of Easter Island is about 6,000 inhabitants. So it seems that the number of horses living on Easter Island is not twice the number of people.",
  "response":"According to James Grant-Peterkin in his book \u201cA Companion to Easter Island\u201d, there are almost 3,000 horses on Easter Island. However, locals often claim that they have more horses than people. The population of Easter Island is about 6,000 inhabitants. So it seems that the number of horses living on Easter Island is not twice the number of people.",
  "references":[
    "It is worth mentioning the huge population of horses (about 6,000) that already outnumber people and roam free on the island."
  ],
  "citation_links":[],
  "webpage_references":[],
  "attribution_label":"not attributable",
  "src_dataset":"AttrScore-GenSearch",
  "id":"AttrScore-GenSearch_7234d6e9-1f51-4203-9587-f539e34d34f4"
}
```
### Data Fields
- ```question```: ```str``` The question proposed by the user.
- ```claim```: ```str``` Part of the response to the question. Could be one single sentence or multiple sentences.
- ```claim_raw_string```: ```str``` The raw string of the claim from the original datasets before being processed.
- ```response```: ```str``` The response to the question generated by LMs or generative search engines.
- ```references```: ```List[str]``` A list of documents or paragraphs which could support the claim.
- ```citation_links```: ```Optional[List[str]]``` Reserved field for citation links.
- ```webpage_references```: ```Optional[List[str]]``` Reserved field for the webpage contents of the reference links.
- ```attribution_label```: ```str``` "attributable" or "not attributable".
- ```src_dataset```: ```str``` The source dataset of the data item.
- ```id```: ```str``` The unique id for the data item in AttributionBench.

## Training
For fine-tuning models on AttributionBench, please refer to the scripts under the ```scripts/``` directory. For example, if you want to fine-tune FLAN-T5, then simply do:
```shell
cd zsh_scripts
sh run_flant5.sh
```
Please modify the hyperparameters and paths before you do so.